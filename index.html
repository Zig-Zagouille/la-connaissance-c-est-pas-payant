<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aircrack-ng Projet Partage</title>
    <style>
        body {
    font-family: monospace, sans-serif;
    background-color: #1e1e1e;
    color: white;
    margin: 0;
    padding: 0;
    overflow: hidden;
}

/* Terminal */
#terminal {
    width: 100%;
    height: 80vh; /* Modifier la hauteur pour laisser de l'espace à l'input */
    padding: 20px;
    overflow-y: scroll;
    border-bottom: 2px solid #fff;
}

/* Input */
#input-container {
    display: flex;
    justify-content: flex-start;
    padding: 10px;
}

#input-container input {
    background-color: #61952e;
    color: white;
    border: none;
    border-radius: 5px;
    padding: 10px;
    width: 100%;
    font-size: 16px;
    outline: none;
}

#input-container input:focus {
    border: 2px solid #4CAF50;
}

/* Bulle de tutoriel */
.tooltip {
    position: absolute;
    background-color: #61952e;
    color: white;
    padding: 15px;
    border-radius: 10px;
    max-width: 90%;  /* Réduit la taille des bulles sur mobile */
    z-index: 9999;
    top: 20px;
    right: 10px; /* Ajuste la position pour être un peu plus proche du bord */
    font-family: Arial, sans-serif;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    cursor: move;
}

/* Titre */
.tooltip h2 {
    margin: 0;
    font-size: 20px;  /* Réduit la taille du titre pour les petits écrans */
    font-weight: bold;
}

/* Paragraphe */
.tooltip p {
    margin: 10px 0;
    font-size: 16px; /* Ajuste la taille du texte pour plus de lisibilité */
}

/* Code */
pre {
    background-color: #333;
    color: #f8f8f2;
    padding: 10px;
    border-radius: 5px;
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 16px;  /* Réduit la taille du code */
    width: 100%;
    margin: 10px 0;
}

/* Image explicative */
.tooltip-image {
    max-width: 100%;
    height: auto;
    margin: 10px 0;
}

/* Bouton de fermeture */
.close-btn {
    position: absolute;
    top: 5px;
    right: 5px;
    background-color: red;
    color: white;
    border: none;
    border-radius: 50%;
    padding: 5px;
    cursor: pointer;
}

/* Media Queries pour les petits écrans */
@media screen and (max-width: 600px) {
    /* Adaptation du terminal */
    #terminal {
        height: 70vh; /* Ajuste la hauteur du terminal sur mobile */
    }

    /* Réduit la taille du texte dans les bulles de tutoriel */
    .tooltip h2 {
        font-size: 18px;
    }
    .tooltip p {
        font-size: 14px;
    }
    pre {
        font-size: 14px;  /* Réduit encore plus la taille du texte dans les blocs de code */
    }

    /* Ajuste les images dans les bulles */
    .tooltip-image {
        max-width: 100%;
        height: auto;
    }
}

/* Media Queries pour les très petits écrans */
@media screen and (max-width: 400px) {
    /* Réduit la largeur de la bulle de tutoriel */
    .tooltip {
        max-width: 95%; /* La bulle occupera 95% de l'écran */
    }

    /* Ajuste encore plus la taille du texte */
    .tooltip h2 {
        font-size: 16px;
    }
    .tooltip p {
        font-size: 12px;
    }
    pre {
        font-size: 12px;
    }
}
        
        
        
        
    </style>
</head>
<body>
    <div id="terminal"></div>
    <div id="input-container">
        <input type="text" id="command-input" placeholder="Entrez une commande..." autofocus />
    </div>

    <script>
        const networks = [
            { bssid: '00:14:22:01:23:45', channel: 6, signal: -45, essid: 'MonReseau', clients: [
                { mac: '11:00:14:22:01:23', ip: '192.168.1.10' },
                { mac: '22:00:14:22:01:24', ip: '192.168.1.11' }
            ]},
            { bssid: '00:14:22:01:23:46', channel: 11, signal: -50, essid: 'AutreReseau', clients: [
                { mac: '33:00:14:22:01:25', ip: '192.168.1.20' }
            ]}
        ];

        let isSudo = false;
        let isMonitorMode = false;
        let currentInterface = 'wlan0';
        let monitorInterface = 'wlan0mon';

        const terminal = document.getElementById("terminal");
        const commandInput = document.getElementById("command-input");

        function printToTerminal(message) {
            const p = document.createElement("p");
            p.textContent = message;
            terminal.appendChild(p);
            terminal.scrollTop = terminal.scrollHeight;
        }

        function executeCommand(command) {
            const cmd = command.trim().toLowerCase();
            
            if (cmd === "sudo su") {
                if (isSudo) {
                    printToTerminal("Vous êtes déjà en mode superutilisateur.");
                } else {
                    isSudo = true;
                    printToTerminal("Mode superutilisateur activé.");
                }
            } 
            else if (cmd === "exit") {
                if (isSudo) {
                    isSudo = false;
                    printToTerminal("Mode superutilisateur désactivé.");
                } else {
                    printToTerminal("Fermeture du terminal.");
                }
            }
            else if (cmd === "iwconfig") {
                printToTerminal(isMonitorMode ? `${monitorInterface}  Mode: Monitor` : `${currentInterface}  Mode: Managed`);
            }
            else if (cmd === "ifconfig") {
                printToTerminal(`${currentInterface}  Link encap:Ethernet  HWaddr 00:11:22:33:44:55\n          inet6 addr: fe80::21b:43ff:fe23:4d6/64 Scope:Link\n          UP`);
                if (isMonitorMode) {
                    printToTerminal(`${monitorInterface}  Link encap:Ethernet  HWaddr 00:11:22:33:44:56\n          inet6 addr: fe80::21b:43ff:fe23:4d7/64 Scope:Link\n          UP`);
                }
            }
            else if (cmd.startsWith("airmon-ng start wlan0")) {
                if (isMonitorMode) {
                    printToTerminal("wlan0mon est déjà en mode moniteur.");
                } else {
                    isMonitorMode = true;
                    printToTerminal("Mode moniteur activé sur wlan0.");
                }
            }
            else if (cmd.startsWith("airmon-ng stop wlan0mon")) {
                if (!isMonitorMode) {
                    printToTerminal("Le mode moniteur n'est pas activé.");
                } else {
                    isMonitorMode = false;
                    printToTerminal("Mode moniteur désactivé sur wlan0mon.");
                }
            }
            else if (cmd === "airodump-ng wlan0mon") {
                if (!isMonitorMode) {
                    printToTerminal("Erreur: L'interface wlan0 doit être en mode moniteur pour exécuter cette commande.");
                } else {
                    printToTerminal("Scan des réseaux WiFi... Voici les résultats :");
                    networks.forEach(network => {
                        printToTerminal(`${network.bssid}  Canal ${network.channel}  Signal: ${network.signal} dBm  ESSID: ${network.essid}`);
                    });
                }
            }
            else if (cmd.startsWith("airodump-ng --bssid")) {
    const match = cmd.match(/--bssid ([\w:]+)\s+(\S+)/);
    if (!match) {
        printToTerminal("Erreur: Format de commande invalide. Assurez-vous d'utiliser --bssid <BSSID> <interface>.");
    } else {
        const bssid = match[1]; 
        const interfaceName = match[2]; 


        const isInterfaceValid = interfaceName === "wlan0mon" || interfaceName === "wlan1mon"; 

        if (!isInterfaceValid) {
            printToTerminal(`Erreur: L'interface ${interfaceName} n'est pas en mode moniteur.`);
            return;
        }

        const network = networks.find(n => n.bssid === bssid);
        if (network) {
            printToTerminal(`Affichage des détails du réseau avec BSSID ${bssid}...`);
            printToTerminal(`BSSID              Canal  Signal  ESSID\n${network.bssid}  ${network.channel}  ${network.signal} dBm  ${network.essid}`);
            printToTerminal("Clients détectés :");
            network.clients.forEach(client => {
                printToTerminal(`MAC: ${client.mac}  IP: ${client.ip}`);
            });
        } else {
            printToTerminal("BSSID non trouvé.");
        }
    }
}

            else if (cmd.startsWith("airodump-ng wlan0mon --channel")) {
                const match = cmd.match(/--channel (\d+) --bssid ([\w:]+) -w (\S+)/);
                if (match) {
                    const [_, channel, bssid, outputFile] = match;
                    const network = networks.find(n => n.bssid === bssid);
                    if (network) {
                        printToTerminal(`Exécution de airodump-ng sur le canal ${channel} pour le BSSID ${bssid}, avec enregistrement dans ${outputFile}.cap`);
                        printToTerminal(`Scan du réseau ${network.essid} (BSSID: ${bssid}, Canal: ${network.channel}, Signal: ${network.signal} dBm)...`);
                    } else {
                        printToTerminal("BSSID non trouvé pour cette commande.");
                    }
                } else {
                    printToTerminal("Commande airodump-ng mal formée. Vérifiez la syntaxe.");
                }
            }
            else if (cmd.startsWith("aireplay-ng -0")) {
                if (!isMonitorMode) {
                    printToTerminal("Erreur: L'interface wlan0mon doit être en mode moniteur.");
                } else {
                    const match = cmd.match(/-0 (\d+) -a ([\w:]+) -c ([\w:]+)/);
                    if (match) {
                        const [_, count, bssid, clientMac] = match;
                        printToTerminal(`Envoi de ${count} paquets de désauthentification vers ${bssid} (${clientMac})...`);
                    } else {
                        printToTerminal("Commande aireplay-ng incorrecte.");
                    }
                }
            }
            else if (cmd.startsWith("aircrack-ng")) {
    const parts = cmd.split(" ");
    let dictionaryFile = null;
    let bssid = null;
    let captureFile = null;

    parts.forEach((part, index) => {
        if (part === "-w" && parts[index + 1]) {
            dictionaryFile = parts[index + 1];
        } else if (part === "-b" && parts[index + 1]) {
            bssid = parts[index + 1];
        } else if (part.endsWith(".cap")) {
            captureFile = part;
        }
    });

    if (!dictionaryFile) {
        printToTerminal("Erreur: Fichier dictionnaire (-w) non spécifié.");
    } else if (!bssid) {
        printToTerminal("Erreur: BSSID (-b) non spécifié.");
    } else if (!captureFile) {
        printToTerminal("Erreur: Fichier de capture (.cap) non spécifié.");
    } else {
        printToTerminal(`Tentative de craquage du mot de passe WPA avec le fichier ${captureFile}...\n`);
        
        const fs = require('fs');
        if (fs.existsSync(dictionaryFile) && fs.existsSync(captureFile)) {
            const command = `aircrack-ng -w ${dictionaryFile} -b ${bssid} ${captureFile}`;
            const { exec } = require('child_process');
            exec(command, (error, stdout, stderr) => {
                if (error) {
                    printToTerminal(`Erreur d'exécution: ${error.message}`);
                    return;
                }
                if (stderr) {
                    printToTerminal(`Erreur: ${stderr}`);
                    return;
                }
                printToTerminal(`Résultat de aircrack-ng :\n${stdout}`);
            });
        } else {
            printToTerminal("Erreur: Un des fichiers spécifiés est manquant.");
        }
    }
}
 else {
                printToTerminal(`Commande non reconnue: ${cmd}`);
            }
        }

        commandInput.addEventListener("keydown", function(event) {
            if (event.key === "Enter") {
                const command = commandInput.value.trim();
                printToTerminal("$ " + command);
                executeCommand(command);
                commandInput.value = ""; 
            }
        });

        commandInput.focus();
        
        
        
        
        
        
        
        
        
        
        

        const tutorialSteps = [
          {
        title: "Informations Diverses",
        text: "Cette page imparfaite a pour but de découvrir une introduction au Pentest (Test d'intrusion) de façon éthique, ludique et accessible par toustes quelque soit l'expérience en informatique. Nous introduisons ici une initiation simplifiée de l'outil Aircrack-ng (disponible sur Windows, Linux, et macOS) pour comprendre les grande étape comme : passer sa carte WIFI en mode moniteur, analyser le réseau, désauthentifier, capturer des paquets, ou encore déchiffrer une clé. C'est une démonstration générale qui se veut simplifier les concepts dans les grandes lignes, pour aller plus loin, il faut consulter la nombreuse documentation web.  <br><br> Ici nous travaillerons sur la syntaxe d'Aircrack-ng sous Linux avec une tentative de reproduction d'invite de commande très basique. <br><br> Il n'est pas necessaire de rappeler que ce projet est à but éducatif officiellement portant sur la sécurité de nos réseaux WIFI restant dans un cadre éthique.",
        image: null
    },
    {
        title: "1. Privilège superutilisateur",
        text: [
            "Passer en mode superutilisateur avec cette commande afin d'avoir la pleine utilisation de la machine :",
            "sudo su",
            "Puis, on regarde le nom de l'interface réseau que l'on a  :",
            "iwconfig",
            "Ou :",
            "ifconfig",
            "Ici on aura wlan0, cela dépend de la machine."
        ],
        code: null,
        image: null
    },
    {
        title: "2. Carte WIFI en mode moniteur",
        text: ["De base, la carte WIFI est en mode managed, c'est à dire qu'elle ne reçoit que les paquets qui doivent parvenir à l'adresse MAC de la machine.<br>Le mode monitor capte tous les paquets qui se trouvent à portée de la machine.<br><br>Alors il faut activer le mode moniteur sur la carte WIFI pour surveiller/écouter les réseaux :",
        "airmon-ng start wlan0","Pour remettre en managed, on remplacera start par stop :","airmon-ng stop wlan0", 
        "On peut refaire un ifconfig ou iwconfig."],
        image: null
    },
    {
        title: "3. Scan de réseaux",
        text:[ "Scannez les réseaux WiFi à proximité pour choisir une cible (on utilisera désormais notre carte en moniteur) :",
      "airodump-ng wlan0mon",
        "On peut regarder les appareils connecté à un réseau cible :",
        "sudo airodump-ng wlan0mon --channel ^numéro canal^ --bssid ^bssid cible^"],
        image: null
    },
    {
        title: "4. Déauthentification/Capture de paquet",
        text: ["Effectuez une attaque de déauthentification pour déconnecter un client spécifique :",
       "aireplay-ng -0 ^nb de désauth^ -a ^bssid cible^ -c ^machine connecté au bssid cible^ wlan0mon",
        "Pour capturer des paquets du reseau cible : ",
        "airodump-ng wlan0mon --channel ^numéro canal^ --bssid ^bssid cible^ -w ^nom-fichier-capture^"],
        image: null
    },
    {
        title: "5. Crack du mot de passe",
        text:  "aircrack-ng pour tentative de crack le mot de passe avec un fichier dico de mdp :",
        code: "aircrack-ng -w ^dico-mdp.txt^ -b ^bssid cible^ ^fichier-capture.cap^",
        image: null
    }
];

let tutorialIndex = 0;


function showTutorialStep() {
    if (tutorialIndex < tutorialSteps.length) {
        const currentStep = tutorialSteps[tutorialIndex];


        const tooltipHtml = `
            <div class="tooltip" id="tutorial-step-${tutorialIndex}" onmousedown="startDrag(event, ${tutorialIndex})">
                <h2>${currentStep.title}</h2>
                
                <!-- Affichage du texte avec gestion des lignes multiples -->
                ${Array.isArray(currentStep.text)
                    ? currentStep.text.map(item => {
                        if (item.includes("iwconfig") || item.includes("ifconfig") ||  item.includes("airmon-ng start wlan0") ||  item.includes("airmon-ng stop wlan0") || item.includes("sudo airodump-ng wlan0mon --channel ^numéro canal^ --bssid ^bssid cible^") ||  item.includes("airodump-ng wlan0mon") || item.includes("aireplay-ng -0 ^nb de désauth^ -a ^bssid cible^ -c <machine connecté au bssid cible> wlan0mon") ||  item.includes("airodump-ng wlan0mon --channel  ^numéro canal^ --bssid ^bssid cible^ -w ^nom fichier capture^") || item.includes("aircrack-ng -w ^dico-mdp.txt^ -b ^bssid cible^ ^fichier-capture.cap^")) {
                            return `<pre><code>${item}</code></pre>`;
                        } else {
                            return `<p>${item}</p>`;
                        }
                    }).join('')
                    : `<p>${currentStep.text}</p>`}

                <!-- Affichage de l'image si présente -->
                ${currentStep.image ? `<img src="${currentStep.image}" alt="Image explicative" class="tooltip-image">` : ''}
                
                <!-- Affichage du code sous forme de bloc -->
                ${currentStep.code ? `<pre><code>${currentStep.code}</code></pre>` : ''}
                
                <button class="close-btn" onclick="closeTutorialStep(${tutorialIndex})">X</button>
            </div>
        `;


        document.body.insertAdjacentHTML('beforeend', tooltipHtml);
    }
}


function closeTutorialStep(stepIndex) {
    const tooltipElement = document.getElementById(`tutorial-step-${stepIndex}`);
    if (tooltipElement) {
        tooltipElement.remove();
        tutorialIndex++;
        showTutorialStep();
    }
}


let isDragging = false;
let offsetX, offsetY;

function startDrag(event, stepIndex) {
    const tooltipElement = document.getElementById(`tutorial-step-${stepIndex}`);
    if (tooltipElement) {
        isDragging = true;
        offsetX = event.clientX - tooltipElement.offsetLeft;
        offsetY = event.clientY - tooltipElement.offsetTop;

        document.addEventListener("mousemove", drag, false);
        document.addEventListener("mouseup", stopDrag, false);
    }
}

function drag(event) {
    if (isDragging) {
        const tooltipElement = document.querySelector(".tooltip:hover");
        if (tooltipElement) { 
            tooltipElement.style.left = `${event.clientX - offsetX}px`;
            tooltipElement.style.top = `${event.clientY - offsetY}px`;
        }
    }
}

function stopDrag() {
    isDragging = false;
    document.removeEventListener("mousemove", drag, false);
    document.removeEventListener("mouseup", stopDrag, false);
}


let isResizing = false;
let lastDownX = 0;
let lastDownY = 0;

function startResize(event, index) {
    event.preventDefault();
    isResizing = true;
    lastDownX = event.clientX || event.touches[0].clientX;
    lastDownY = event.clientY || event.touches[0].clientY;

    document.addEventListener("mousemove", doResize, false);
    document.addEventListener("touchmove", doResize, false);
    document.addEventListener("mouseup", stopResize, false);
    document.addEventListener("touchend", stopResize, false);
}


function doResize(event) {
    if (isResizing) {
        const tooltipElement = document.querySelector(".tooltip:hover");
        if (tooltipElement) { 
            const dx = (event.clientX || event.touches[0].clientX) - lastDownX;
            const dy = (event.clientY || event.touches[0].clientY) - lastDownY;

            const newWidth = tooltipElement.offsetWidth + dx;
            const newHeight = tooltipElement.offsetHeight + dy;

            tooltipElement.style.width = `${newWidth}px`;
            tooltipElement.style.height = `${newHeight}px`;

            lastDownX = event.clientX || event.touches[0].clientX;
            lastDownY = event.clientY || event.touches[0].clientY;
        }
    }
}

function stopResize() {
    isResizing = false;
    document.removeEventListener("mousemove", doResize, false);
    document.removeEventListener("touchmove", doResize, false);
    document.removeEventListener("mouseup", stopResize, false);
    document.removeEventListener("touchend", stopResize, false);
}


showTutorialStep();



    </script>
  
</body>
</html>


